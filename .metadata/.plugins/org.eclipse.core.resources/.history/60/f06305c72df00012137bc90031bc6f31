/*
 * p8_EdgeFlag.cpp
 *
 *  Created on: 2013/07/19
 *      Author: yumikoy
 */

#include <windows.h>
#include <stdio.h>
#include <GL/gl.h>
#include <GL/glut.h>

// glEdgeFlag\(GL_(TRUE|FALSE)\);\r?\n\s+glVertex2f\((.*),(.*)\)
// -> vertexWithEdgeFlag(GL_$1, $2, $3)
void vertexWithEdgeFlag(GLboolean flag, GLfloat x, GLfloat y) {
	glEdgeFlag(flag);
	glVertex2f(x, y);
}

void disp(void) {
	GLint shadeModel;
//	glShadeModel(GL_FLAT);
	glGetIntegerv(GL_SHADE_MODEL, &shadeModel);
	printf("0x%X", shadeModel);

	glClear(GL_COLOR_BUFFER_BIT);
	glBegin(GL_POLYGON);
	glColor4f(1,1,0,1);
	vertexWithEdgeFlag(GL_TRUE, -0.9, -0.5);
	glColor4f(1,0,1,1);
	vertexWithEdgeFlag(GL_TRUE, -0.85,  0.9);
	vertexWithEdgeFlag(GL_TRUE, 0,  0.3); //f
	vertexWithEdgeFlag(GL_TRUE, -0.9,  -0.5);
	vertexWithEdgeFlag(GL_TRUE, 0.9,  -0.5);  // f
	vertexWithEdgeFlag(GL_TRUE, 0,  0.3);
	vertexWithEdgeFlag(GL_TRUE, 0.85,  0.9);
	vertexWithEdgeFlag(GL_TRUE, 0.9,  -0.5);  // f
	vertexWithEdgeFlag(GL_TRUE, 0,  0.3);  // f
	glEnd();
	glutSwapBuffers();
}
int main(int argc, char ** argv) {
	glutInit(&argc, argv);
	glutInitWindowPosition(100, 50);
	glutInitWindowSize(400, 300);
	glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA);
	glutCreateWindow("Kitty on your lap");
	glutDisplayFunc(disp);
	glutMainLoop();
	return 0;
}
